(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,a){e.exports={header:"App_header__fd1tQ",navbar:"App_navbar__BErtr",link:"App_link__uU5Qb",linkActive:"App_linkActive__3HJN-"}},16:function(e,t,a){e.exports={Orders:"Orders_Orders__1xCMM",tOrders:"Orders_tOrders__1h4Of",downloadLink:"Orders_downloadLink__16VFk"}},23:function(e,t,a){e.exports={LoaderElement:"Loader_LoaderElement__TKJt8","LoaderElement-1":"Loader_LoaderElement-1__1Uyso","LoaderElement-2":"Loader_LoaderElement-2__7_93Z","LoaderElement-3":"Loader_LoaderElement-3__3QRqg",Loader:"Loader_Loader__2nfeP"}},39:function(e,t,a){e.exports={form:"Upload_form__WWOh0"}},40:function(e,t,a){e.exports={Button:"Button_Button__pg2i_"}},42:function(e,t,a){},43:function(e,t,a){e.exports={Error:"Error_Error__3efFs"}},46:function(e,t,a){e.exports=a(75)},55:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),o=a(15),u=a(11),s=a(14),i=a(17),d={orders:[],loading:!0,err:null};var m=a(38),p=Object(s.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_START":return Object(i.a)({},e,{loading:!0});case"FETCH_SUCCESS":return Object(i.a)({},e,{loading:!1,orders:t.data});case"FETCH_ERROR":return Object(i.a)({},e,{loading:!1,err:t.err});case"CLOSE_ERR":return Object(i.a)({},e,{err:null});default:return e}}),Object(s.a)(m.a)),E=(a(55),a(39)),f=a.n(E),_=a(40),v=a.n(_);function h(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:e.clickHandler,className:v.a.Button,type:e.type},e.children))}var b=a(12),O=a.n(b),k=a(20),g=a(41),y=a.n(g).a.create({baseURL:"https://whispering-tor-85814.herokuapp.com"});var L=Object(u.b)(null,(function(e){return{uploadCSV:function(t){return e(function(e){return function(){var t=Object(k.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),(n=new FormData).append("file",e),y.post("/api/upload",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){return r.a.createElement("form",{className:f.a.form,onSubmit:function(t){t.preventDefault();var a=t.target.uploadFile.files;a.length&&(e.uploadCSV(a[0]),e.history.push("/"))}},r.a.createElement("label",{htmlFor:"uploadFile"},"Choose CSV file to upload"),r.a.createElement("input",{type:"file",id:"uploadFile",accept:".csv"}),r.a.createElement(h,{type:"submit"},"Upload"))})),w=a(45),C=a(26),N=a(16),j=a.n(N),S=a(23),x=a.n(S);function F(){return r.a.createElement("div",{className:x.a.Loader},r.a.createElement("div",{className:x.a.LoaderElement},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}var R=a(42),H=a.n(R);function A(e){return r.a.createElement("tr",{className:H.a.Order},r.a.createElement("th",null,e.number),r.a.createElement("th",null,e.user),r.a.createElement("th",null,e.date),r.a.createElement("th",null,e.value),r.a.createElement("th",null,e.currency),r.a.createElement("th",null,e.status))}function T(e){return{type:"FETCH_SUCCESS",data:e}}var U=a(43),B=a.n(U);function J(e){return r.a.createElement("div",{className:B.a.Error},r.a.createElement("p",null,e.children),r.a.createElement(h,{clickHandler:e.clickHandler},"OK"))}var V=Object(u.b)((function(e){return{orders:e.orders,loading:e.loading,err:e.err}}),(function(e){return{getOrders:function(){return e(function(){var e=Object(k.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_START"}),e.prev=1,e.next=4,y.get("/api/orders");case 4:a=e.sent,n=a.data,t(T(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"FETCH_ERROR",err:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},closeErr:function(){return e({type:"CLOSE_ERR"})}}}))((function(e){var t=Object(n.useState)([]),a=Object(C.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(["num",""]),u=Object(C.a)(o,2),s=u[0],i=u[1];return Object(n.useEffect)((function(){e.getOrders()}),[]),Object(n.useLayoutEffect)((function(){c(e.orders)}),[e.orders]),r.a.createElement("div",{className:j.a.Orders},e.err?r.a.createElement(J,{clickHandler:e.closeErr},e.err):null,r.a.createElement("h2",null,"Orders"),e.loading?r.a.createElement(F,null):r.a.createElement("table",{className:j.a.tOrder},r.a.createElement("thead",null,r.a.createElement("tr",null,[["num","\u2116"],["user_email","User email"],["date","date"],["value","value"],["currency","currency"],["status","status"]].map((function(e){return r.a.createElement("th",{key:Math.random(),onClick:function(){return function(e){var t=Object(w.a)(l);s[0]===e?(t.sort((function(t,a){return t[e]<a[e]})),i(["",e])):(t.sort((function(t,a){return t[e]>a[e]})),i([e,""])),c(t)}(e[0])},className:j.a.thead},e[1],s[0]===e[0]?r.a.createElement("i",{className:"fas fa-angle-down"}):s[1]===e[0]?r.a.createElement("i",{className:"fas fa-angle-up"}):null)})))),r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement(A,{key:e._id,number:e.num+1,user:e.user_email,date:e.date,value:e.value,currency:e.currency,status:e.status})})))),r.a.createElement("a",{className:j.a.downloadLink,href:"".concat("https://whispering-tor-85814.herokuapp.com","/api/download")},"Download"))})),W=a(9),D=a(10),M=a.n(D);var Q=function(e){return r.a.createElement("div",{className:M.a.App},r.a.createElement("header",{className:M.a.header},r.a.createElement("nav",{className:M.a.navbar},r.a.createElement(o.b,{className:M.a.link,exact:!0,activeClassName:M.a.linkActive,to:"/"},"Home"),r.a.createElement(o.b,{className:M.a.link,activeClassName:M.a.linkActive,to:"/upload"},"Upload"))),r.a.createElement(W.c,null,r.a.createElement(W.a,{path:"/",exact:!0,component:V}),r.a.createElement(W.a,{path:"/upload",component:L})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(u.a,{store:p},r.a.createElement(o.a,null,r.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.44da7661.chunk.js.map